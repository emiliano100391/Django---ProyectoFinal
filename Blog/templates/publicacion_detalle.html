{% extends 'base.html' %}
{% load static %}
{% block contenido %}

<section class="container mb-5">
    <h1>{{publicacion.titulo_public}}</h1>
    <p> {{publicacion.autor_public}} </p>
    <h6> <small> {{categorias|join:", "}}</small></h6>
    {% if publicacion.fecha_publicacion %}
    <div>
        {{publicacion.fecha_publicacion}}
    </div>
    {% else %}
    <a href="" class="btn btn-success mb-2">Publicar</a>
    {% endif %}
    
    {% if imagen_public %}
    <img src="{{publicacion.imagen_public.url}}" width="20%" height="20%" alt="Imagen" class="card-img-top" name="imagen_public">
    {% else %}
    <p>No hay imagen</p>
    {% endif %}

    <p> {{publicacion.contenido_public}} </p>

    <a href="{% url 'publicaciones:publicacion_editar' publicacion.id %}" class="btn btn-primary">Editar</a> 
    <a href="{% url 'publicaciones:publicacion_eliminar' publicacion.id %}" class="btn btn-danger">Eliminar</a>
    <hr>

    <h3>Comentarios</h3>
    <div class="container">
        {% for c in publicacion.comentarios.all %}
        <div class="border border-secondary mt-2 mb-2">
            <p><strong>{{c.autor_comentario}}</strong></p>
            <p>{{c.body_comentario}}</p>
            <p><small>{{c.fecha_comentario}}</small></p>
    </div>
        {% empty %}
        <p>No hay comentarios.</p>
    
        {% endfor %}
    </div>
    <div class="container">
        <h4>Comentar:</h4>
        <form action="{% url 'publicaciones:publicacion_detalle' publicacion.id %}" method="post">
            {% csrf_token %}
            <input type="text" class="form-control" name="autor_comentario" placeholder="Tu nombre">
            <textarea class="form-control" name="body_comentario"></textarea>
            <input type="submit" value="Comentar">
        </form>
    </div>
</section>

{% endblock contenido %}